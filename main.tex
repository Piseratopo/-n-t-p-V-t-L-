\documentclass[a4paper, titlepage, openany]{book}
\usepackage[utf8]{inputenc}
\usepackage[T5]{fontenc}
\usepackage[vietnamese]{babel}
\usepackage[a4paper]{geometry}
\usepackage[explicit]{titlesec}
\usepackage{amsmath, amssymb, blindtext, bm, calc, caption, float, hyperref, icomma, lmodern, makecell, multicol, pgfplots, steinmetz, tikz, tikz-3dplot, varwidth, wrapfig2, xcolor, xparse, xeCJK}

% Tinh chỉnh Tikz
\usetikzlibrary{arrows.meta, calc, decorations.pathmorphing, intersections, pgfplots.fillbetween, shadings}

% Căn lề và khoảng cách
\geometry{bindingoffset=0.5cm, inner=2cm, outer=2cm, top=2cm, bottom=2cm}
\setcellgapes{2pt}

% Thêm khoảng cách giữa các đoạn trong minipage
\newlength{\recordparindent}
\newenvironment{minipageindent}[1]{
   \setlength{\recordparindent}{\parindent}
   \setlength{\parindent}{0em}
   \begin{minipage}{#1}
   \setlength{\parindent}{\recordparindent}
}{
   \end{minipage}
   \setlength{\parindent}{\recordparindent}
}
\allowdisplaybreaks

% Định nghĩa tông màu
\definecolor{colorEmphasisCyan}{RGB}{0, 120, 255}
\definecolor{colorEmphasis}{RGB}{220, 24, 78}
\definecolor{colorEmphasisGreen}{RGB}{0, 171, 77}

% Chỉnh phông chữ
\setCJKmainfont[
   Path= fonts/,
   AutoFakeSlant=0.2,
   AutoFakeBold=2.0
]{DFKai-SB}

% Tăng kích cỡ ô trong bảng
\makegapedcells

% Đánh dấu định nghĩa
\newcommand{\defText}[1]{\textbf{#1}}
\newcommand{\defMath}[1]{\bm{#1}}
\newcommand{\chungF}{\textit{壿}}
\newcommand{\theF}{\textit{世}}
\newcommand{\chanF}{\textit{振}}
\newcommand{\leF}{\textit{禮}}
\DeclareMathOperator{\Arg}{Arg}

\title{\Huge Ôn tập Vật Lí}
\author{Bùi Nhật Minh}

% Xử lí số đếm của bài tập
\newcounter{exercise}

\NewDocumentCommand{\exercise}{o}{
   \refstepcounter{exercise}
   \noindent\textbf{\textcolor{colorEmphasisCyan}{Bài \arabic{exercise}:}}
   \IfNoValueTF{#1}
      {\label{ex\arabic{exercise}}}
      {\label{#1}}
}

% Xử lí số đếm lời giải
\newcounter{solution}

\NewDocumentCommand{\solution}{o}{
   \refstepcounter{solution}
   \IfNoValueTF{#1}
      {\noindent\textbf{Lời giải bài~\ref{ex\arabic{exercise}}:}}
      {\noindent\textbf{Lời giải bài~\ref{#1}}:}
   \IfNoValueTF{#1}
      {\label{sol\arabic{solution}}}
      {\label{sol-#1}}
}

% Xử lí đánh số
\newcommand\dblquote[1]{\textquotedblleft #1\textquotedblright}
\newcommand{\chapdir}{chapter/}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
\renewcommand{\thetable}{\thechapter.\arabic{table}}
\numberwithin{equation}{chapter}

\newcounter{subexercise}
\setcounter{subexercise}{1}

% Phục vụ viết biểu thức
\newcommand{\refeq}[1]{(\ref{#1})}
\newcommand{\equationexplanation}[1]{\qquad \textcolor{colorEmphasis}{\left(\text{#1}\right)}}

% Định nghĩa kích thước các bộ phận của đồ thị
\def \pointSize {2pt}
\pgfkeys{
   /tikz/graph thickness/.style={
      very thick,
      smooth
   }
}

\def \guideLineLength {0.4}
\pgfkeys{
   /tikz/guideline/.style={
      very thin
   }
}
\pgfkeys{
   /tikz/measuring arrow/.style={
      <->, 
      >=latex 
      % shorten >= \pointSize, 
      % shorten <= \pointSize
   }
}
\pgfkeys{
   /tikz/single measuring arrow/.style={
      ->, 
      >=latex
   }
}
\pgfkeys{
   /tikz/hollow point/.style={
      graph thickness,
      fill=white
   }
}
\tikzset{snake it/.style={decorate, decoration=snake, very thin}}

% Làm đẹp tiêu đề
\titleformat{name=\chapter,numberless}
   {\normalfont\Huge\bfseries}
   {}
   {0pt}
   {\textcolor{colorEmphasisCyan}{#1}}

\titleformat{\chapter}
   {\normalfont\Huge\bfseries}
   {}
   {0pt}
   {\textcolor{colorEmphasisCyan}{
      {\fontsize{60}{72}\selectfont\thechapter.}\\[0.5em]
      #1}
   }

\titleformat{\section}
   {\normalfont\Large\bfseries}
   {}
   {0pt}
   {%
      \setlength{\fboxrule}{2pt}% Border thickness
      \setlength{\fboxsep}{1em}% Padding
      \fcolorbox{colorEmphasisCyan}{white}{% Border color and fill color
         \parbox{\dimexpr\linewidth-2\fboxsep-2\fboxrule\relax}{%
         \textcolor{colorEmphasisCyan}{\thesection}\quad #1
         }%
      }%
   }

\titleformat{\subsection}
   {\normalfont\large\bfseries}
   {}
   {0pt}
   {\textcolor{colorEmphasisCyan}{\thesubsection} \quad #1}

% Chỉnh màu của mục lục
\makeatletter
\patchcmd{\@tocline}
   {\numberline}
   {\color{colorEmphasisCyan}\numberline}
   {}{}
\patchcmd{\l@chapter}
   {\bfseries}
   {\color{colorEmphasisCyan}\bfseries}
   {}{}
\makeatother

\makeatletter
\renewcommand{\numberline}[1]{\textcolor{colorEmphasisCyan}{#1}\hspace{1em}}
\makeatother

\begin{document}

\setcounter{chapter}{-1}

\maketitle

\tableofcontents

\input{\chapdir loi_gioi_thieu.tex}
% \input{\chapdir kiem_tra.tex}
\input{\chapdir toan_hoc_nen_tang.tex}
% \input{\chapdir co_ban_xu_li_so_lieu.tex}
% \input{\chapdir chuyen_dong.tex}

\nocite{*}

\bibliographystyle{unsrt}
\bibliography{references}

\end{document}

